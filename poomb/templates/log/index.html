{% extends 'base.html' %}

{% block header %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <h1>Training Log</h1>
  <a href="{{ url_for('log.add') }}" class='btn btn-primary'>Add</a>
  
  <style>
    #Barbell g{
      animation: fadeInUp 1s;
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20%);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    #svg-element g[id^='plate']{
      transform:translateX(-100%);
      animation: slideInLeft 8s;
      animation-timing-function: ease;
      animation-fill-mode: forwards;
      animation-delay: calc(var(--animation-order) * 300ms);
      animation-iteration-count: infinite;
    }
    @keyframes slideInLeft {
      20% {
        opacity: 0;
        transform: translateX(-100%);
      }
      30%, 100% {
        opacity:1;
        transform: translateX(0%);
      }
    
    }
    #svg-element g[id^='placa']{
      transform:translateX(100%);
      animation: slideInRight 8s;
      animation-timing-function: ease;
      animation-fill-mode: forwards;
      animation-delay: calc(var(--animation-order) * 300ms);
      animation-iteration-count: infinite;
    }
    @keyframes slideInRight {
      20% {
        transform: translateX(100%);
      }
      30%, 100% {
        transform: translateX(0%);
      }
    
    } 
  </style>
  
{% endblock %}

{% block content %}

<div class="grid">
  
    <table>
      <caption>Recent Training</caption>
      <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">Exercise</th>
          <th scope="col">Weight</th>
          <th scope="col">Sets</th>
          <th scope="col">Reps</th>
          
        </tr>
      </thead>
      <tbody>
        {% for row in exercises %}
          <tr>
            <td>{{ row.tday }}</td>
            <td>{{ row.exercise }}</td>
            <td>{{ row.weight }}</td>
            <td>{{ row.sets }}</td>
            <td>{{ row.reps }}</td>
            <td>
              <a href="{{ url_for('log.update', tid=row.tid) }}" class='btn btn-primary'>Edit</a>
              <a href="{{ url_for('log.delete', tid=row.tid) }}" class='btn btn-primary' onclick='return confirm("Are you sure")'>Delete</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <table>
      <caption>Recent Events</caption>
      <thead>
        <tr>
          <th scope="col">Federation</th>
          <th scope="col">Date</th>
          <th scope="col">Location</th>
          <th scope="col">Competition Name</th>
        </tr>
      </thead>
      <tbody id="extracted-data">
        <tr>
          <td colspan="4">
            <svg id="svg-element" reserveAspectRatio="xMidYMid meet" viewBox="0 0 120 100" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g id="Frame 1" clip-path="url(#clip0_1_2)">
              <g id="Barbell">
              <g id="Rectangle 1" filter="url(#filter0_d_1_2)">
              <rect x="26" y="39" width="72" height="3" fill="#121212"/>
              </g>
              <g id="Rectangle 2" filter="url(#filter1_d_1_2)">
              <rect x="24" y="36" width="2" height="9" fill="#121212"/>
              </g>
              <g id="Rectangle 3" filter="url(#filter2_d_1_2)">
              <rect x="98" y="36" width="2" height="9" fill="#121212"/>
              </g>
              <g id="Rectangle 4" filter="url(#filter3_d_1_2)">
              <rect x="7" y="39" width="17" height="3" fill="#121212"/>
              </g>
              <g id="Rectangle 5" filter="url(#filter4_d_1_2)">
              <rect x="100" y="39" width="17" height="3" fill="#121212"/>
              </g>
              </g>
              <g id="Left_Plates">
              <g id="plate1" style="--animation-order:1;">
              <rect id="plate1" x="22" y="28" width="2" height="23" fill="#121212"/>
              </g>
              <g id="plate5" style="--animation-order:3;">
              <rect id="plate5" x="16" y="28" width="2" height="23" fill="#121212"/>
              </g>
              <g id="plate7" style="--animation-order:4;">
              <rect id="plate7" x="13" y="28" width="2" height="23" fill="#121212"/>
              </g>
              <g id="plate3" style="--animation-order:2;">
              <rect id="plate3" x="19" y="28" width="2" height="23" fill="#121212"/>
              </g>
              </g>
              <g id="Right_Plates">
              <g id="placa6" style="--animation-order:3;">
              <rect id="plate6" x="106" y="29" width="2" height="23" fill="#121212"/>
              </g>
              <g id="placa8" style="--animation-order:4;">
              <rect id="plate8" x="109" y="29" width="2" height="23" fill="#121212"/>
              </g>
              <g id="placa4" style="--animation-order:2;">
              <rect id="plate4" x="103" y="29" width="2" height="23" fill="#121212"/>
              </g>
              <g id="placa2" style="--animation-order:1;">
              <rect id="plate2" x="100" y="29" width="2" height="23" fill="#121212"/>
              </g>
              </g>
              </g>
              <defs>
              <filter id="filter0_d_1_2" x="22" y="39" width="80" height="11" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="2"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>
              </filter>
              <filter id="filter1_d_1_2" x="20" y="36" width="10" height="17" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="2"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>
              </filter>
              <filter id="filter2_d_1_2" x="94" y="36" width="10" height="17" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="2"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>
              </filter>
              <filter id="filter3_d_1_2" x="3" y="39" width="25" height="11" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="2"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>
              </filter>
              <filter id="filter4_d_1_2" x="96" y="39" width="25" height="11" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="2"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape"/>
              </filter>
              <clipPath id="clip0_1_2">
              <rect width="120" height="100" fill="white"/>
              </clipPath>
              </defs>
            </svg>
              
              
              
            </div>
          </td>
        </tr>
      </tbody>
    </table>   
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#svg-element").show();
    $.ajax({
      method: "GET",
      url: "http://127.0.0.1:5000/api/webscrape",
    }).done(function(response) {
      $("#svg-element").hide();
      let data = response.data;
      for (let i = 0; i < data.length; i++) {
        let row = "<tr>";
        row += "<td>" + data[i]["Fed"] + "</td>"; // Display Federation value
        row += "<td>" + data[i]["Date"] + "</td>"; // Display Date value
        row += "<td>" + data[i]["Location"] + "</td>"; // Display Location value
        row += "<td>" + data[i]["Competition"] + "</td>";
        
        row += "</tr>";
        $("#extracted-data").append(row);
      }
    });
  });
</script>

{% endblock %}
